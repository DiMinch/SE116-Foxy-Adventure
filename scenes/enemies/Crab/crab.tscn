[gd_scene load_steps=17 format=3 uid="uid://pe3jgo1h8wlq"]

[ext_resource type="Script" uid="uid://crwnv5esc6llw" path="res://scenes/enemies/crab/crab.gd" id="1_ep1gc"]
[ext_resource type="Texture2D" uid="uid://fii540ugfj5n" path="res://assets/foxy/fox_hat/fox_defeat_3.png" id="2_dhdpt"]
[ext_resource type="Texture2D" uid="uid://bheixrcxv5gb4" path="res://assets/monsters/crab/crab_hurt_01.png" id="2_ewkck"]
[ext_resource type="Texture2D" uid="uid://boxmc12qq7a8a" path="res://assets/monsters/crab/crab_hurt_02.png" id="3_ep1gc"]
[ext_resource type="Texture2D" uid="uid://div7bok06185o" path="res://assets/monsters/crab/crab_01.png" id="4_phqbf"]
[ext_resource type="Texture2D" uid="uid://d24uce3wqmwe6" path="res://assets/monsters/crab/crab_02.png" id="5_b1gr1"]
[ext_resource type="Texture2D" uid="uid://dq122qahq1rm2" path="res://assets/monsters/crab/crab_03.png" id="6_rl4in"]
[ext_resource type="PackedScene" uid="uid://cbjbo6gtyss6f" path="res://scripts/core/hit_area_2d.tscn" id="7_dhdpt"]
[ext_resource type="PackedScene" uid="uid://ct1tqxgwkuvbe" path="res://scripts/core/hurt_area_2d.tscn" id="8_b1gr1"]
[ext_resource type="Script" uid="uid://b7g18r857thhi" path="res://scenes/enemies/states/run.gd" id="8_phqbf"]
[ext_resource type="Script" uid="uid://cgf7dpugq584a" path="res://scenes/enemies/crab/hurt.gd" id="10_rl4in"]
[ext_resource type="Script" uid="uid://dxbbk38i7qj7a" path="res://scenes/enemies/crab/node.gd" id="11_dhdpt"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gen76"]
size = Vector2(29, 17)

[sub_resource type="SpriteFrames" id="SpriteFrames_va7kl"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_dhdpt")
}],
"loop": true,
"name": &"dead",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_ewkck")
}, {
"duration": 1.0,
"texture": ExtResource("3_ep1gc")
}],
"loop": true,
"name": &"hurt",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_phqbf")
}, {
"duration": 1.0,
"texture": ExtResource("5_b1gr1")
}, {
"duration": 1.0,
"texture": ExtResource("6_rl4in")
}],
"loop": true,
"name": &"run",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1d2yd"]
size = Vector2(37, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rl4in"]
size = Vector2(37, 24)

[node name="Crab" type="CharacterBody2D"]
collision_layer = 8
collision_mask = 3
script = ExtResource("1_ep1gc")
metadata/_custom_type_script = "uid://s4xx82espxdt"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-3.5, 0.5)
shape = SubResource("RectangleShape2D_gen76")

[node name="Direction" type="Node2D" parent="."]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Direction"]
sprite_frames = SubResource("SpriteFrames_va7kl")
animation = &"hurt"

[node name="FrontRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(13, -6)
target_position = Vector2(14, 0)

[node name="DownRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(17, 4)
target_position = Vector2(0, 15)

[node name="HitArea2d" parent="Direction" instance=ExtResource("7_dhdpt")]
position = Vector2(2, 0)
collision_layer = 32
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/HitArea2d"]
position = Vector2(-5, 0)
shape = SubResource("RectangleShape2D_1d2yd")

[node name="HurtArea2d" parent="Direction" instance=ExtResource("8_b1gr1")]
position = Vector2(2, 0)
collision_layer = 16
collision_mask = 64

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/HurtArea2d"]
position = Vector2(-3, 0)
shape = SubResource("RectangleShape2D_rl4in")

[node name="States" type="Node" parent="."]

[node name="Run" type="Node" parent="States"]
script = ExtResource("8_phqbf")

[node name="Hurt" type="Node" parent="States"]
script = ExtResource("10_rl4in")

[node name="Node" type="Node" parent="States"]
script = ExtResource("11_dhdpt")

[connection signal="hurt" from="Direction/HurtArea2d" to="." method="_on_hurt_area_2d_hurt"]
