[gd_scene load_steps=20 format=3 uid="uid://c2rtdki2wb8yc"]

[ext_resource type="Script" uid="uid://de4kwyl1p0yl2" path="res://scenes/characters/enemies/pelican/pelican.gd" id="1_noiek"]
[ext_resource type="Resource" uid="uid://00im54rsdpqr" path="res://data/enemys/pelican/pelican.tres" id="2_i42oo"]
[ext_resource type="Texture2D" uid="uid://bva0rmdfqkllp" path="res://assets/monsters/pelican/pelican_atk_01.png" id="2_uckb8"]
[ext_resource type="Script" uid="uid://c1lgf5lgnrcat" path="res://scripts/factories/node2d_factory.gd" id="2_vr358"]
[ext_resource type="Resource" uid="uid://cddydpt3nvisn" path="res://data/enemys/pelican/pelican_bullet.tres" id="3_jaktw"]
[ext_resource type="Texture2D" uid="uid://t1l5sq6mwvpy" path="res://assets/monsters/pelican/pelican_atk_02.png" id="3_xvggs"]
[ext_resource type="Texture2D" uid="uid://cjkhykjhk6ymu" path="res://assets/monsters/pelican/pelican_atk_03.png" id="4_8et0h"]
[ext_resource type="Texture2D" uid="uid://bmwu64534qgv2" path="res://assets/monsters/pelican/pelican_01.png" id="5_2wr8p"]
[ext_resource type="Texture2D" uid="uid://dbefh6jah2y5r" path="res://assets/monsters/pelican/pelican_02.png" id="6_i42oo"]
[ext_resource type="Texture2D" uid="uid://dw761f534hsq" path="res://assets/monsters/pelican/pelican_03.png" id="7_6861i"]
[ext_resource type="Texture2D" uid="uid://b3ewkkxgxwo45" path="res://assets/monsters/pelican/pelican_04.png" id="8_jaktw"]
[ext_resource type="Script" uid="uid://csu2b21cwchqw" path="res://scripts/core/hurt_area_2d.gd" id="10_xvggs"]
[ext_resource type="Script" uid="uid://ub10tdqa3kgp" path="res://scenes/characters/enemies/pelican/states/fly.gd" id="11_2wr8p"]
[ext_resource type="PackedScene" uid="uid://6kyg0fbsmyks" path="res://scenes/characters/enemies/pelican/weapon/pelican_bullet.tscn" id="12_7fm61"]
[ext_resource type="Script" uid="uid://4n67oeeuvjxj" path="res://scenes/characters/enemies/pelican/states/attack.gd" id="12_i42oo"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uckb8"]
size = Vector2(34, 21)

[sub_resource type="SpriteFrames" id="SpriteFrames_7fm61"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_uckb8")
}, {
"duration": 1.0,
"texture": ExtResource("3_xvggs")
}, {
"duration": 1.0,
"texture": ExtResource("4_8et0h")
}],
"loop": false,
"name": &"attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_2wr8p")
}, {
"duration": 1.0,
"texture": ExtResource("6_i42oo")
}, {
"duration": 1.0,
"texture": ExtResource("7_6861i")
}, {
"duration": 1.0,
"texture": ExtResource("8_jaktw")
}],
"loop": true,
"name": &"fly",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8et0h"]
size = Vector2(40, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jaktw"]
size = Vector2(200, 200)

[node name="Pelican" type="CharacterBody2D"]
collision_layer = 8
script = ExtResource("1_noiek")
pelican_data = ExtResource("2_i42oo")
bullet_data = ExtResource("3_jaktw")
gravity = 0.0
metadata/_custom_type_script = "uid://s4xx82espxdt"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1, -2.5)
shape = SubResource("RectangleShape2D_uckb8")

[node name="Direction" type="Node2D" parent="."]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Direction"]
sprite_frames = SubResource("SpriteFrames_7fm61")
animation = &"fly"

[node name="BulletFactory" type="Marker2D" parent="Direction"]
script = ExtResource("2_vr358")
product_packed_scene = ExtResource("12_7fm61")
target_container_name = &"Bullets"
metadata/_custom_type_script = "uid://c1lgf5lgnrcat"

[node name="HurtArea2D" type="Area2D" parent="Direction"]
collision_layer = 16
collision_mask = 0
script = ExtResource("10_xvggs")
metadata/_custom_type_script = "uid://csu2b21cwchqw"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/HurtArea2D"]
position = Vector2(1, -3)
shape = SubResource("RectangleShape2D_8et0h")

[node name="DetectPlayerArea2D" type="Area2D" parent="Direction"]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Direction/DetectPlayerArea2D"]
position = Vector2(0, 100)
shape = SubResource("RectangleShape2D_jaktw")

[node name="DownRayCast2D" type="RayCast2D" parent="Direction"]
target_position = Vector2(0, 200)

[node name="FrontRayCast2D" type="RayCast2D" parent="Direction"]
position = Vector2(6, 4)
target_position = Vector2(20, 0)

[node name="States" type="Node" parent="."]

[node name="Fly" type="Node" parent="States"]
script = ExtResource("11_2wr8p")

[node name="Attack" type="Node" parent="States"]
script = ExtResource("12_i42oo")
